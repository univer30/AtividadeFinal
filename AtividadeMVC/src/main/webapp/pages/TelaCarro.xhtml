<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Lista de carros</title>
</h:head>
<h:body>
     <p:growl id="mensagem"/>
     <h:form id="formListagem">
          <p:panel header="Listagem de Carros"></p:panel>
           <p:dataTable id="tabela" emptyMessage="nenhum registro encontrado"
               paginator="true" value="#{CarroBean.carros}" var="carro">
               <f:facet name="header">
                 <p:commandButton value="Novo" actionListener="#CarroBean.novo"  oncomplete="PF('dialog').show();"/>
              </f:facet> 
                <p:column headerText="Modelo" sortBy="#(carro.modelo)" filterBy="#{carro.modelo}">
                    <h:outputText value="#{carro.modelo} " />
                  </p:column>
                   <p:column headerText="Marca" sortBy="#(carro.marca)" filterBy="#{carro.marca}">
                    <h:outputText value="#{carro.marca} " />
                  </p:column>
                   <p:column headerText="Tipo" sortBy="#(carro.tipo)" filterBy="#{carro.tipo}">
                    <h:outputText value="#{carro.tipo} " />
                  </p:column>
                   <p:column headerText="Ano" sortBy="#(carro.ano)" filterBy="#{carro.ano}">
                       <h:outputText value="#{carro.ano} " />
                    <p:column headerText="Opções">
                    
                     <p:commandButton icon="ui-icon-trash" actionListener="#{CarroBean.excluir}" update="formListagem:tabela :mensagem">
                                <p:confirm header="Confirmação" message="Deseja Excluir?" icon="ui-icon-alert"/> 
                                 <f:attribute name="carroSelecionado" value="#{carro}" ></f:attribute>       
                          </p:commandButton>   
                     
                     
                      <p:commandButton icon="ui-icon-pencil" oncomplete="PF('dialog').show();"
                           actionListener="#{CarroBean.editar}" update="formListagem:tabela :mensagem">  
                          <f:attribute name="carroSelecionado" value="#{carro}" ></f:attribute>
                          </p:commandButton>
                     </p:column>
                  </p:column>
            </p:dataTable>
             <p:confirmDialog global="true">
                    <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                    <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/> 
              </p:confirmDialog>
     </h:form>
      <!-- Minimodal -->
           <p:dialog  header="Novo proprietário" widgetVar="dialog" modal="true"
              draggable="false" resizable="false" closable="false">
              <h:form id="formCadastro">
                  <h:panelGrid id="painel" columns="2">
                        <p:outputLabel value="Modelo:"/>
                        <p:inputText maxlength="100" size="30" value="Palio"/>
            
                         <p:outputLabel value="Marca:"/>
                         <p:inputText maxlength="30" size="10" value="#{CarroBean.carro.marca}"/>
                         
                         <p:outputLabel value="Tipo:"/>
                         <p:inputText maxlength="50" size="10" value="#{CarroBean.carro.tipo}"/>
                         
                        <p:outputLabel value="Ano:"/>
                         <p:inputText maxlength="100" size="10" value="#{CarroBean.carro.ano}"/>
                   </h:panelGrid>
                   <h:panelGrid columns="2">
                       <p:commandButton value="Salvar" actionListener="#{CarroBean.salvar}" />
                       <p:commandButton value="Fechar" oncomplete="PF('dialog').hide();"  update=":formCadastro:painel :formListagem:tabela :mensagem" />
                    </h:panelGrid>
              </h:form>
             
              </p:dialog>
     
     
     

</h:body>
</html>
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Proprietario</title>
</h:head>
<h:body>
 <p:growl id="mensagem"/>
<h:form id="formListagem">
   <p:panel header="Listagem de Proprietarios"></p:panel>
      <p:dataTable id="tabela" emptyMessage="nenhum registro encontrado"
        paginator="true" value="#{proprietarioBean.prorietariolist}" var="proprietario">
       
             <f:facet name="header">
                 <p:commandButton value="Novo" actionListener="#proprietarioBean.novo" update="formCadastro:painel" oncomplete="PF('dialog').show();"/>
              </f:facet> 
              
              <p:column headerText="Nome" sortBy="#{proprietario.nome}" filterBy="#{proprietario.nome}">
                    <h:outputText value="#{proprietario.nome} " />
                  </p:column>
                  <p:column headerText="Idade" sortBy="#{proprietario.idade}" filterBy="#{proprietario.idade}" >
                    <h:outputText value="#{proprietario.idade}" />
                    </p:column>
                    <p:column headerText="Telefone" sortBy="#{proprietario.telefone}" filterBy="#{proprietario.telefonee}">
                       <h:outputText value="#{proprietario.telefone}"/>     
                    </p:column>
                     <p:column headerText="Endereço" sortBy="#{proprietario.endereco}" filterBy="#{proprietario.endereco}">
                       <h:outputText  value="#{proprietario.enereco}"/>     
                    </p:column>
                     <p:column headerText="Opções">
                         <p:commandButton icon="ui-icon-trash" actionListener="#{proprietarioBean.excluir}" update="formListagem:tabela :mensagem">
                                <p:confirm header="Confirmação" message="Deseja Excluir?" icon="ui-icon-alert"/> 
                                 <f:attribute name="proprietarioSelecionado" value="#{proprietario}" ></f:attribute>    
                                 
                          </p:commandButton> 
                          <p:commandButton icon="ui-icon-pencil" oncomplete="PF('dialog').show();"
                           actionListener="#{proprietarioBean.editar}" update="formListagem:tabela :mensagem">  
                          <f:attribute name="proprietarioSelecionado" value="#{proprietario}" ></f:attribute>
                          </p:commandButton>
                          
                     </p:column>
                 </p:dataTable>
                 
                 <p:confirmDialog global="true">
                    <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                    <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/> 
                  </p:confirmDialog>
           </h:form>
           
           <!-- Minimodal -->
           <p:dialog  header="Novo proprietário" widgetVar="dialog" modal="true"
              draggable="false" resizable="false" closable="false">
              <h:form id="formCadastro">
                  <h:panelGrid id="painel" columns="2">
                        <p:outputLabel value="Nome:"/>
                        <p:inputText maxlength="100" size="30" value="#{proprietarioBean.proprietario.nome}"/>
            
                         <p:outputLabel value="Idade:"/>
                         <p:inputText maxlength="30" size="10" value="#{proprietarioBean.proprietario.idade}"/>
                         
                         <p:outputLabel value="Telefone:"/>
                         <p:inputText maxlength="50" size="10" value="#{proprietarioBean.proprietario.telefone}"/>
                         
                        <p:outputLabel value="Endereco:"/>
                         <p:inputText maxlength="100" size="10" value="#{proprietarioBean.proprietario.enereco}"/>
                   </h:panelGrid>
                   <h:panelGrid columns="2">
                       <p:commandButton value="Salvar" actionListener="#{proprietarioBean.salvar}" />
                       <p:commandButton value="Fechar" oncomplete="PF('dialog').hide();"  update=":formCadastro:painel :formListagem:tabela :mensagem" />
                    </h:panelGrid>
              </h:form>
             
              </p:dialog>
              
             
        </h:body>
    </html>